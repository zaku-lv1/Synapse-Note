<%- include('../partials/header') %>

<main>
    <div class="form-container">
        <h2 class="page-title">チーム管理</h2>
        <p class="form-description">チームの作成、編集、メンバー管理を行います。</p>
        
        <% if (locals.success) { %>
            <div class="custom-alert custom-alert-success">
                <span class="alert-icon">✓</span>
                <%= success %>
                <button class="alert-close" onclick="this.parentElement.style.display='none'">&times;</button>
            </div>
        <% } %>
        
        <div class="team-actions">
            <a href="/teams/create" class="button button-primary">新しいチーム作成</a>
            <a href="/teams/random" class="button button-secondary">ランダムチーム作成</a>
        </div>

        <div class="teams-grid">
            <% if (teams && teams.length > 0) { %>
                <% teams.forEach(team => { %>
                    <div class="team-card">
                        <h3><%= team.name %></h3>
                        <p>メンバー数: <%= team.members ? team.members.length : 0 %>人</p>
                        <p>ハンター数: <%= team.hunters ? team.hunters.length : 0 %>人</p>
                        <div class="team-actions">
                            <a href="/teams/<%= team.id %>" class="button button-small">詳細</a>
                            <a href="/teams/<%= team.id %>/edit" class="button button-small button-secondary">編集</a>
                        </div>
                    </div>
                <% }) %>
            <% } else { %>
                <div class="empty-state">
                    <p>まだチームが作成されていません。</p>
                    <a href="/teams/create" class="button">最初のチームを作成</a>
                </div>
            <% } %>
        </div>
    </div>
</main>

<style>
.team-actions {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
    flex-wrap: wrap;
}

.teams-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
}

.team-card {
    background: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    padding: 1.5rem;
    box-shadow: var(--box-shadow);
}

.team-card h3 {
    margin-bottom: 1rem;
    color: var(--primary-color);
}

.team-card .team-actions {
    margin-top: 1rem;
    margin-bottom: 0;
}

.button-small {
    font-size: 0.9rem;
    padding: 0.5rem 1rem;
}

.button-secondary {
    background: var(--muted-text-color);
    color: white;
}

.button-secondary:hover {
    background: #5a6570;
}

.empty-state {
    text-align: center;
    padding: 3rem;
    color: var(--muted-text-color);
}

.empty-state p {
    margin-bottom: 1.5rem;
    font-size: 1.1rem;
}
</style>

<%- include('../partials/footer') %>